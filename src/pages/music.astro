---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getRecentTracks } from '../content/music';

const recentTracks = getRecentTracks(10);
---

<BaseLayout title="Music - Blog26" description="Recent listens and mixes">
  <h1>Music</h1>
  <p class="intro">Recent listens, mixes, and sounds.</p>

  {recentTracks.length > 0 ? (
    <section class="tracks">
      {recentTracks.map((track) => (
        <article class="track">
          <div class="track-info">
            <h2>{track.title}</h2>
            <p class="artist">{track.artist}</p>
          </div>
          <div class="player">
            <iframe
              width="100%"
              height="166"
              scrolling="no"
              frameborder="no"
              allow="autoplay"
              src={`${track.embedUrl}&color=%238b5cf6&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false`}
            ></iframe>
          </div>
        </article>
      ))}
    </section>
  ) : (
    <section class="empty-state">
      <p>No tracks added yet.</p>
      <p class="hint">Add tracks to <code>src/content/music.ts</code> to display them here.</p>

      <div class="instructions">
        <h2>How to add tracks:</h2>
        <ol>
          <li>Go to a track or playlist on Soundcloud</li>
          <li>Click <strong>Share</strong> &rarr; <strong>Embed</strong></li>
          <li>Copy the <code>src</code> URL from the iframe code</li>
          <li>Add it to the tracks array in <code>src/content/music.ts</code></li>
        </ol>
      </div>
    </section>
  )}
</BaseLayout>

<style>
  h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .intro {
    color: var(--color-muted);
    margin-bottom: 2rem;
  }

  .tracks {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .track {
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    overflow: hidden;
  }

  .track-info {
    padding: 1rem 1.5rem;
    background: #f9fafb;
    border-bottom: 1px solid #e5e7eb;
  }

  .track-info h2 {
    font-size: 1.125rem;
    margin-bottom: 0.25rem;
  }

  .artist {
    color: var(--color-muted);
    font-size: 0.875rem;
  }

  .player {
    padding: 1rem;
  }

  .player iframe {
    border-radius: 4px;
  }

  .empty-state {
    padding: 3rem;
    background: #f9fafb;
    border-radius: 12px;
    text-align: center;
  }

  .empty-state p {
    color: var(--color-muted);
    margin-bottom: 0.5rem;
  }

  .hint code {
    background: #e5e7eb;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.875rem;
  }

  .instructions {
    margin-top: 2rem;
    padding: 1.5rem;
    background: white;
    border-radius: 8px;
    text-align: left;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }

  .instructions h2 {
    font-size: 1rem;
    margin-bottom: 1rem;
  }

  .instructions ol {
    padding-left: 1.5rem;
    color: var(--color-muted);
  }

  .instructions li {
    margin-bottom: 0.5rem;
  }

  .instructions code {
    background: #f3f4f6;
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
    font-size: 0.875rem;
  }
</style>
